DROP TABLE IF EXISTS users;
CREATE TABLE users (
  id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
  password VARCHAR(255) NOT NULL,
  email VARCHAR(55) NOT NULL UNIQUE,
  name VARCHAR(55) NOT NULL,
  surname VARCHAR(55) NOT NULL,
  is_admin BOOL,
  special_apps BOOL DEFAULT FALSE,
  is_active BOOL DEFAULT TRUE,
  email_token INT,
  verified   BOOL DEFAULT FALSE, 
  pc         VARCHAR(255) DEFAULT '',  
  os VARCHAR(20) DEFAULT '',  
  created_at VARCHAR(40) NOT NULL
);

DROP TABLE IF EXISTS courses;
CREATE TABLE courses (
  id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
  title VARCHAR(44) NOT NULL,
  description VARCHAR(480) NOT NULL,
  author VARCHAR(25) NOT NULL,
  thumbnail VARCHAR(155) NOT NULL,
  preview VARCHAR(155) NOT NULL,
  rating INTEGER DEFAULT 0, 
  num_reviews INTEGER DEFAULT 0, 
  duration VARCHAR(25) NOT NULL, 
  is_active BOOL DEFAULT FALSE,
  sort_order INTEGER, 
  created_at VARCHAR(40) NOT NULL
);

DROP TABLE IF EXISTS user_courses;
CREATE TABLE user_courses (
  user_id INTEGER NOT NULL,
  course_id INTEGER NOT NULL,
  created_at VARCHAR(40) NOT NULL,
  PRIMARY KEY (user_id, course_id),
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
  FOREIGN KEY (course_id) REFERENCES courses(id) ON DELETE CASCADE
);

DROP TABLE IF EXISTS special_apps;
CREATE TABLE special_apps (
  id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
  user_id INTEGER NOT NULL,
  name VARCHAR(55) NOT NULL,
  process_name VARCHAR(55) NOT NULL,
  os VARCHAR(55) NOT NULL,
  is_active BOOL DEFAULT TRUE,
  created_at VARCHAR(40) NOT NULL
);

DROP TABLE IF EXISTS apps;
CREATE TABLE apps (
  id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
  name VARCHAR(55) NOT NULL,
  process_name VARCHAR(55) NOT NULL,
  os VARCHAR(55) NOT NULL,
  is_active BOOL DEFAULT TRUE,
  created_at VARCHAR(40) NOT NULL
);


DROP TABLE IF EXISTS videos;
CREATE TABLE videos (
  id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
  title VARCHAR(15) NOT NULL,
  description VARCHAR(55) NOT NULL,
  video_hls VARCHAR(255) NOT NULL,
  thumbnail VARCHAR(155) NOT NULL,
  duration VARCHAR(155) NOT NULL, 
  length VARCHAR(155) NOT NULL, 
  views INTEGER DEFAULT 0, 
  course_id INTEGER NOT NULL, 
  created_at VARCHAR(40) NOT NULL
);

DROP TABLE IF EXISTS files;
CREATE TABLE files (
  id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
  path VARCHAR(255) NOT NULL,
  page INTEGER NOT NULL,
  video_id INTEGER NOT NULL, 
  sort_order INTEGER, 
  created_at VARCHAR(40) NOT NULL
);

DROP TABLE IF EXISTS history;
CREATE TABLE history (
  id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
  video_id INTEGER NOT NULL,
  course_id INTEGER NOT NULL,
  user_id INTEGER NOT NULL,
  video_resume VARCHAR(55) NOT NULL,
  created_at VARCHAR(40) NOT NULL
);

DROP TABLE IF EXISTS reivews;
CREATE TABLE reviews (
  id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
  course_id INTEGER NOT NULL,
  user_id INTEGER NOT NULL,
  description VARCHAR(255) NOT NULL,
  rating INTEGER NOT NULL, 
  created_at VARCHAR(40) NOT NULL
);
